import{r,R as X,j as e,b as c}from"./app-1e18f165.js";import ee from"./AuthenticatedLayout-35ef529f.js";import te from"./CategoryComponent-24f94b5d.js";import se from"./PartNumComponent-bb6aa8a0.js";import"./jspdf.plugin.autotable-4d2935a7.js";import ae from"./ModalMesaAyuda-f09d1cc7.js";import{u as re}from"./index-ab6bc43a.js";import"./Icons-b91f86eb.js";import"./chunk-GQT3YUX3-05826e1a.js";import"./chunk-UWE6H66T-765a7095.js";import"./index-4be7962f.js";import"./chunk-RFEIBVIG-7ed02666.js";import"./transition-ae3f1835.js";import"./CategoryDropdown-96bdf4fc.js";import"./NumberList-76732bd2.js";import"./AllPartNumber-152e0216.js";import"./chunk-DBLREEYE-6b14ae71.js";import"./chunk-XHQUSKIE-c5e0d731.js";import"./useFocusable-37bc966c.js";import"./focusSafely-0d0e41b4.js";import"./chunk-RJKRL3AU-284c64b8.js";import"./index-dc85cc98.js";import"./useHover-fbcb60c8.js";import"./chunk-6NL67ZRH-a7aa1da5.js";import"./proxy-1822e291.js";import"./create-factory-27ee3d52.js";import"./chunk-TDOFO53L-d21b4ec9.js";import"./chunk-KMN6V4NS-45834527.js";import"./chunk-736YWA4T-0c999bc3.js";import"./useDialog-1281e82d.js";import"./useLabels-bd056dc8.js";import"./useLocalizedStringFormatter-6dfb6611.js";import"./VisuallyHidden-6788c411.js";import"./Overlay-e3689e7a.js";import"./getScrollParent-84ae6cc8.js";import"./FocusScope-34698c61.js";import"./useOverlayTriggerState-20dfbcae.js";import"./useControlledState-0b6c3be6.js";import"./mergeRefs-2b78dc7b.js";import"./chunk-3S23ARPO-e576983a.js";import"./index-1034a95c.js";import"./index-43d4f642.js";function He({auth:M,unreadNotifications:z,data:E,partNumData:L,MAData:m,CategoriasMA:R}){const[_,P]=r.useState([]),[n,w]=r.useState([]),[v,x]=r.useState(""),[S,p]=r.useState(""),[C,h]=r.useState(""),[D,u]=r.useState([]),[F,g]=r.useState(""),[I,f]=r.useState([]),[U,q]=r.useState({}),[i,k]=r.useState("");re();const[$,T]=r.useState([]),[b,y]=r.useState({});X.useState("md"),r.useEffect(()=>{m&&T(m)},[m]);const B=async()=>{if(!i.trim()){console.warn("El campo de búsqueda está vacío.");return}try{console.log("este es lo que se mande: ",i);const t=await c.post(route("zebra.search",{selectedParts:i||""}));console.log("Datos recibidos: ",t.data),P(t.data.partNums)}catch(t){console.error("Error al obtener números de parte:",t)}},Q=(t,s)=>{q(a=>({...a,[t]:s}))},Y=async t=>{try{const s=await c.get(route("zebra.filter.partnum",{categorySelected:t||""}));P(s.data.partNums)}catch(s){console.error("Error al obtener números de parte:",s)}},Z=async t=>{const s=n.includes(t)?n.filter(a=>a!==t):[...n,t];w(s),s.length===0&&(x(0),p(0),h(0),u(0),g(0),f("")),G(s)},G=async t=>{try{const[s,a,d,o]=await Promise.all([c.post(route("zebra.listprice"),{selectedParts:t}),c.post(route("zebra.finalprice"),{selectedParts:t}),c.post(route("zebra.desc"),{selectedParts:t}),c.post(route("zebra.datospartes"),{selectedParts:t})]);x(s.data.totalListPrice),p(a.data.totalFinalPrice),h(a.data.descuento),u(d.data.imagen),g(d.data.Desc);const N=t.map(l=>{var A;const j=o.data.listPrice[l]||0,O=o.data.totalPrice[l]||0,V=o.data.descuento[l]||0,W=((A=o.data.dataInfo[l])==null?void 0:A[0])||{};return{partNumber:l,listPrice:j,finalPrice:O,descuento:V,dataInfo:W}});f(N)}catch(s){console.error("Error al obtener precios:",s)}},H=()=>{w([]),x(0),p(0),h(0),u(0),g(0),f(""),y({})},J=t=>{y(s=>{const a={...s};return delete a[t],a})},K=(t,s)=>{s&&y(a=>({...a,[t]:s.venta_usd_periodo_equipo}))};return e.jsxs(ee,{auth:M,unreadNotifications:z,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Tabla de cotizacion de productos zebra"}),children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-6 p-4",children:[e.jsxs("div",{className:"w-full md:w-1/3 bg-white border border-gray-300 rounded-lg shadow p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Selección de Productos"}),e.jsx(te,{data:E,onCategorySelect:Y}),e.jsx("div",{class:"w-full max-w-sm min-w-[200px] mb-3",children:e.jsxs("div",{class:"relative flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"absolute w-5 h-5 top-2.5 left-2.5 text-slate-600",children:e.jsx("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z","clip-rule":"evenodd"})}),e.jsx("input",{class:"w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md pl-10 pr-3 py-2 transition duration-300 ease focus:outline-none focus:border-slate-400 hover:border-slate-300 shadow-sm focus:shadow",placeholder:"Part Number/Número de parte...",value:i,onChange:t=>k(t.target.value)}),e.jsx("button",{class:"rounded-md text-gray-700 bg-blue-300 py-2 px-4 border border-transparent text-center text-sm transition-all shadow-md hover:shadow-lg text-white focus:bg-slate-700 focus:shadow-none active:bg-slate-700 hover:bg-slate-700 active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none ml-2",type:"button",onClick:()=>B(),children:"Search"})]})}),e.jsx("div",{className:"flex justify-center items-center mt-4",children:e.jsx("button",{onClick:H,className:"bg-red-500 text-white px-4 py-2 rounded-lg shadow hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-300 mb-5",children:"Limpiar Números de Parte"})}),e.jsx(se,{partNums:_,allData:L,selectedParts:n,onPartNumSelect:Z})]}),e.jsxs("div",{className:"flex flex-col w-full bg-white border border-gray-300 rounded-lg shadow-lg p-5",children:[e.jsxs("div",{className:"flex justify-between p-5 border border-gray-300 rounded-full",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-bold text-gray-600",children:"Precio Lista"}),e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:v?`${v} USD`:"0 USD"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-bold text-gray-600",children:"Precio Final"}),e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:S?`${S} USD`:"0 USD"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-bold text-gray-600",children:"Descuento"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:C?`${C}%`:"0%"})]})]}),e.jsxs("div",{className:"w-full bg-white border border-gray-300 rounded-lg shadow mt-6 p-4 flex items-center gap-4",children:[e.jsxs("div",{className:"w-full flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Imagen"}),D.length>0?e.jsx("img",{src:D,className:"w-auto max-h-[300px] object-contain border rounded"}):e.jsx("p",{className:"text-gray-600",children:"No hay imágenes disponibles para el número de parte seleccionado."})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Descripción"}),F.length>0?e.jsx("p",{className:"text-gray-700",children:F}):e.jsx("p",{className:"text-gray-600",children:"No hay descripción disponible para el número de parte seleccionado."})]})]})]})]}),e.jsx("div",{className:"flex flex-col md:flex-row items-start gap-6 p-4",children:e.jsxs("div",{className:"overflow-x-auto w-full",children:[" ",e.jsxs("table",{className:"min-w-full bg-white shadow-lg rounded-lg overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-300 text-white text-sm font-semibold uppercase",children:[e.jsx("th",{className:"py-3 px-6 text-left text-gray-700",children:"N° Parte"}),e.jsx("th",{className:"py-3 px-6 text-left text-gray-700",children:"Tipo Producto"}),e.jsx("th",{className:"py-3 px-6 text-left text-gray-700",children:"Moneda"}),e.jsx("th",{className:"py-3 px-6 text-left text-gray-700",children:"Cantidad"}),e.jsx("th",{className:"py-3 px-6 text-left text-gray-700",children:"Precio Lista"}),e.jsx("th",{className:"py-3 px-6 text-left text-gray-700",children:"Precio Final"}),e.jsx("th",{className:"py-3 px-6 text-left text-gray-700",children:"Precio mesa AYUDA"}),e.jsx("th",{className:"py-3 px-6 text-left text-gray-700",children:"Descuento"}),e.jsx("th",{className:"py-3 px-6 text-left text-gray-700",children:"Categoria Producto"}),e.jsx("th",{className:"py-3 px-6 text-left text-gray-700",children:"Descripción"}),e.jsx("th",{className:"py-3 px-6 text-left text-gray-700",children:"Select Precio mesa de AYUDA"})]})}),e.jsx("tbody",{className:"text-sm text-gray-800",children:I.length>0?I.map((t,s)=>{const a=U[t.partNumber]||1,d=parseFloat(t.listPrice.replace(/,/g,"")),o=parseFloat(t.finalPrice.replace(/,/g,"")),N=(d*a).toFixed(2),l=b[s]?(o*a+b[s]).toFixed(2):(o*a).toFixed(2);return e.jsxs("tr",{className:"border-b hover:bg-gray-100",children:[e.jsx("td",{className:"py-3 px-6",children:t.partNumber}),e.jsx("td",{className:"py-3 px-6",children:t.dataInfo.Product_Type}),e.jsx("td",{className:"py-3 px-6",children:t.dataInfo.Currency}),e.jsx("td",{className:"py-3 px-6",children:e.jsx("input",{type:"number",min:"1",className:"w-20 border border-gray-300 rounded px-2 py-1",value:a,onChange:j=>Q(t.partNumber,parseInt(j.target.value)||0)})}),e.jsx("td",{className:"py-3 px-6",children:N}),e.jsx("td",{className:"py-3 px-6",children:l}),e.jsx("td",{className:"py-3 px-6",children:b[s]||0}),e.jsx("td",{className:"py-3 px-6",children:`${t.descuento}%`}),e.jsx("td",{className:"py-3 px-6",children:t.dataInfo.Product_Category}),e.jsx("td",{className:"py-3 px-6",children:t.dataInfo.Short_Marketing_Desc}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(ae,{MAData:$,index:s,categories:R,onSelectData:K}),e.jsx("button",{className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",onClick:()=>J(s),children:"Limpiar"})]})})]},s)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"py-3 px-6 text-center",children:"No se han seleccionado productos aún."})})})]})]})})]})}export{He as default};
