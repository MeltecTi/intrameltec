import{A as ct,r as B,$ as st}from"./app-1e18f165.js";import{b as q}from"./focusSafely-0d0e41b4.js";import{$ as Q}from"./useResizeObserver-1f814b9f.js";function J(e,t=-1/0,o=1/0){return Math.min(Math.max(e,t),o)}function Y(e,t){let o=e,l=t.toString(),r=l.indexOf("."),n=r>=0?l.length-r:0;if(n>0){let c=Math.pow(10,n);o=Math.round(o*c)/c}return o}function Ct(e,t,o,l){t=Number(t),o=Number(o);let r=(e-(isNaN(t)?0:t))%l,n=Y(Math.abs(r)*2>=l?e+Math.sign(r)*(l-Math.abs(r)):e-r,l);return isNaN(t)?!isNaN(o)&&n>o&&(n=Math.floor(Y(o/l,l))*l):n<t?n=t:!isNaN(o)&&n>o&&(n=t+Math.floor(Y((o-t)/l,l))*l),n=Y(n,l),n}const z={top:"top",bottom:"top",left:"left",right:"left"},Z={top:"bottom",bottom:"top",left:"right",right:"left"},ft={top:"left",left:"top"},K={top:"height",left:"width"},ot={width:"totalWidth",height:"totalHeight"},X={};let P=typeof document<"u"?window.visualViewport:null;function W(e){let t=0,o=0,l=0,r=0,n=0,c=0,i={};var $;let f=(($=P==null?void 0:P.scale)!==null&&$!==void 0?$:1)>1;if(e.tagName==="BODY"){let d=document.documentElement;l=d.clientWidth,r=d.clientHeight;var p;t=(p=P==null?void 0:P.width)!==null&&p!==void 0?p:l;var g;o=(g=P==null?void 0:P.height)!==null&&g!==void 0?g:r,i.top=d.scrollTop||e.scrollTop,i.left=d.scrollLeft||e.scrollLeft,P&&(n=P.offsetTop,c=P.offsetLeft)}else({width:t,height:o,top:n,left:c}=O(e)),i.top=e.scrollTop,i.left=e.scrollLeft,l=t,r=o;if(ct()&&(e.tagName==="BODY"||e.tagName==="HTML")&&f){i.top=0,i.left=0;var u;n=(u=P==null?void 0:P.pageTop)!==null&&u!==void 0?u:0;var a;c=(a=P==null?void 0:P.pageLeft)!==null&&a!==void 0?a:0}return{width:t,height:o,totalWidth:l,totalHeight:r,scroll:i,top:n,left:c}}function dt(e){return{top:e.scrollTop,left:e.scrollLeft,width:e.scrollWidth,height:e.scrollHeight}}function V(e,t,o,l,r,n,c){var i;let $=(i=r.scroll[e])!==null&&i!==void 0?i:0,f=l[K[e]],p=l.scroll[z[e]]+n,g=f+l.scroll[z[e]]-n,u=t-$+c[e]-l[z[e]],a=t-$+o+c[e]-l[z[e]];return u<p?p-u:a>g?Math.max(g-a,p-u):0}function pt(e){let t=window.getComputedStyle(e);return{top:parseInt(t.marginTop,10)||0,bottom:parseInt(t.marginBottom,10)||0,left:parseInt(t.marginLeft,10)||0,right:parseInt(t.marginRight,10)||0}}function D(e){if(X[e])return X[e];let[t,o]=e.split(" "),l=z[t]||"right",r=ft[l];z[o]||(o="center");let n=K[l],c=K[r];return X[e]={placement:t,crossPlacement:o,axis:l,crossAxis:r,size:n,crossSize:c},X[e]}function G(e,t,o,l,r,n,c,i,$,f){let{placement:p,crossPlacement:g,axis:u,crossAxis:a,size:d,crossSize:h}=l,s={};var m;s[a]=(m=e[a])!==null&&m!==void 0?m:0;var v,E,M,L;g==="center"?s[a]+=(((v=e[h])!==null&&v!==void 0?v:0)-((E=o[h])!==null&&E!==void 0?E:0))/2:g!==a&&(s[a]+=((M=e[h])!==null&&M!==void 0?M:0)-((L=o[h])!==null&&L!==void 0?L:0)),s[a]+=n;const b=e[a]-o[h]+$+f,_=e[a]+e[h]-$-f;if(s[a]=J(s[a],b,_),p===u){const R=i?c[d]:t[ot[d]];s[Z[u]]=Math.floor(R-e[u]+r)}else s[u]=Math.floor(e[u]+e[d]+r);return s}function ut(e,t,o,l,r,n,c,i){const $=l?o.height:t[ot.height];var f;let p=e.top!=null?o.top+e.top:o.top+($-((f=e.bottom)!==null&&f!==void 0?f:0)-c);var g,u,a,d,h,s;let m=i!=="top"?Math.max(0,t.height+t.top+((g=t.scroll.top)!==null&&g!==void 0?g:0)-p-(((u=r.top)!==null&&u!==void 0?u:0)+((a=r.bottom)!==null&&a!==void 0?a:0)+n)):Math.max(0,p+c-(t.top+((d=t.scroll.top)!==null&&d!==void 0?d:0))-(((h=r.top)!==null&&h!==void 0?h:0)+((s=r.bottom)!==null&&s!==void 0?s:0)+n));return Math.min(t.height-n*2,m)}function tt(e,t,o,l,r,n){let{placement:c,axis:i,size:$}=n;var f,p;if(c===i)return Math.max(0,o[i]-e[i]-((f=e.scroll[i])!==null&&f!==void 0?f:0)+t[i]-((p=l[i])!==null&&p!==void 0?p:0)-l[Z[i]]-r);var g;return Math.max(0,e[$]+e[i]+e.scroll[i]-t[i]-o[i]-o[$]-((g=l[i])!==null&&g!==void 0?g:0)-l[Z[i]]-r)}function mt(e,t,o,l,r,n,c,i,$,f,p,g,u,a,d,h){let s=D(e),{size:m,crossAxis:v,crossSize:E,placement:M,crossPlacement:L}=s,b=G(t,i,o,s,p,g,f,u,d,h),_=p,R=tt(i,f,t,r,n+p,s);if(c&&l[m]>R){let j=D(`${Z[M]} ${L}`),at=G(t,i,o,j,p,g,f,u,d,h);tt(i,f,t,r,n+p,j)>R&&(s=j,b=at,_=p)}let H="bottom";s.axis==="top"?s.placement==="top"?H="top":s.placement==="bottom"&&(H="bottom"):s.crossAxis==="top"&&(s.crossPlacement==="top"?H="bottom":s.crossPlacement==="bottom"&&(H="top"));let w=V(v,b[v],o[E],i,$,n,f);b[v]+=w;let T=ut(b,i,f,u,r,n,o.height,H);a&&a<T&&(T=a),o.height=Math.min(o.height,T),b=G(t,i,o,s,_,g,f,u,d,h),w=V(v,b[v],o[E],i,$,n,f),b[v]+=w;let S={},A=t[v]+.5*t[E]-b[v]-r[z[v]];const I=d/2+h;var y,k,N,C;const F=z[v]==="left"?((y=r.left)!==null&&y!==void 0?y:0)+((k=r.right)!==null&&k!==void 0?k:0):((N=r.top)!==null&&N!==void 0?N:0)+((C=r.bottom)!==null&&C!==void 0?C:0),U=o[E]-F-d/2-h,rt=t[v]+d/2-(b[v]+r[z[v]]),nt=t[v]+t[E]-d/2-(b[v]+r[z[v]]),it=J(A,rt,nt);return S[v]=J(it,I,U),{position:b,maxHeight:T,arrowOffsetLeft:S.left,arrowOffsetTop:S.top,placement:s.placement}}function vt(e){let{placement:t,targetNode:o,overlayNode:l,scrollNode:r,padding:n,shouldFlip:c,boundaryElement:i,offset:$,crossOffset:f,maxHeight:p,arrowSize:g=0,arrowBoundaryOffset:u=0}=e,a=l instanceof HTMLElement?gt(l):document.documentElement,d=a===document.documentElement;const h=window.getComputedStyle(a).position;let s=!!h&&h!=="static",m=d?O(o):et(o,a);if(!d){let{marginTop:S,marginLeft:A}=window.getComputedStyle(o);m.top+=parseInt(S,10)||0,m.left+=parseInt(A,10)||0}let v=O(l),E=pt(l);var M,L;v.width+=((M=E.left)!==null&&M!==void 0?M:0)+((L=E.right)!==null&&L!==void 0?L:0);var b,_;v.height+=((b=E.top)!==null&&b!==void 0?b:0)+((_=E.bottom)!==null&&_!==void 0?_:0);let R=dt(r),H=W(i),w=W(a),T=i.tagName==="BODY"?O(a):et(a,i);return a.tagName==="HTML"&&i.tagName==="BODY"&&(w.scroll.top=0,w.scroll.left=0),mt(t,m,v,R,E,n,c,H,w,T,$,f,s,p,g,u)}function O(e){let{top:t,left:o,width:l,height:r}=e.getBoundingClientRect(),{scrollTop:n,scrollLeft:c,clientTop:i,clientLeft:$}=document.documentElement;return{top:t+n-i,left:o+c-$,width:l,height:r}}function et(e,t){let o=window.getComputedStyle(e),l;if(o.position==="fixed"){let{top:r,left:n,width:c,height:i}=e.getBoundingClientRect();l={top:r,left:n,width:c,height:i}}else{l=O(e);let r=O(t),n=window.getComputedStyle(t);r.top+=(parseInt(n.borderTopWidth,10)||0)-t.scrollTop,r.left+=(parseInt(n.borderLeftWidth,10)||0)-t.scrollLeft,l.top-=r.top,l.left-=r.left}return l.top-=parseInt(o.marginTop,10)||0,l.left-=parseInt(o.marginLeft,10)||0,l}function gt(e){let t=e.offsetParent;if(t&&t===document.body&&window.getComputedStyle(t).position==="static"&&!lt(t)&&(t=document.documentElement),t==null)for(t=e.parentElement;t&&!lt(t);)t=t.parentElement;return t||document.documentElement}function lt(e){let t=window.getComputedStyle(e);return t.transform!=="none"||/transform|perspective/.test(t.willChange)||t.filter!=="none"||t.contain==="paint"||"backdropFilter"in t&&t.backdropFilter!=="none"||"WebkitBackdropFilter"in t&&t.WebkitBackdropFilter!=="none"}const $t=new WeakMap;function ht(e){let{triggerRef:t,isOpen:o,onClose:l}=e;B.useEffect(()=>{if(!o||l===null)return;let r=n=>{let c=n.target;if(!t.current||c instanceof Node&&!c.contains(t.current)||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement)return;let i=l||$t.get(t.current);i&&i()};return window.addEventListener("scroll",r,!0),()=>{window.removeEventListener("scroll",r,!0)}},[o,l,t])}let x=typeof document<"u"?window.visualViewport:null;function Tt(e){let{direction:t}=st(),{arrowSize:o=0,targetRef:l,overlayRef:r,scrollRef:n=r,placement:c="bottom",containerPadding:i=12,shouldFlip:$=!0,boundaryElement:f=typeof document<"u"?document.body:null,offset:p=0,crossOffset:g=0,shouldUpdatePosition:u=!0,isOpen:a=!0,onClose:d,maxHeight:h,arrowBoundaryOffset:s=0}=e,[m,v]=B.useState(null),E=[u,c,r.current,l.current,n.current,i,$,f,p,g,a,t,h,s,o],M=B.useRef(x==null?void 0:x.scale);B.useEffect(()=>{a&&(M.current=x==null?void 0:x.scale)},[a]);let L=B.useCallback(()=>{if(u===!1||!a||!r.current||!l.current||!f||(x==null?void 0:x.scale)!==M.current)return;let w=null;if(n.current&&n.current.contains(document.activeElement)){var T;let C=(T=document.activeElement)===null||T===void 0?void 0:T.getBoundingClientRect(),F=n.current.getBoundingClientRect();var S;if(w={type:"top",offset:((S=C==null?void 0:C.top)!==null&&S!==void 0?S:0)-F.top},w.offset>F.height/2){w.type="bottom";var A;w.offset=((A=C==null?void 0:C.bottom)!==null&&A!==void 0?A:0)-F.bottom}}let I=r.current;if(!h&&r.current){var y;I.style.top="0px",I.style.bottom="";var k;I.style.maxHeight=((k=(y=window.visualViewport)===null||y===void 0?void 0:y.height)!==null&&k!==void 0?k:window.innerHeight)+"px"}let N=vt({placement:xt(c,t),overlayNode:r.current,targetNode:l.current,scrollNode:n.current||r.current,padding:i,shouldFlip:$,boundaryElement:f,offset:p,crossOffset:g,maxHeight:h,arrowSize:o,arrowBoundaryOffset:s});if(N.position){if(I.style.top="",I.style.bottom="",I.style.left="",I.style.right="",Object.keys(N.position).forEach(C=>I.style[C]=N.position[C]+"px"),I.style.maxHeight=N.maxHeight!=null?N.maxHeight+"px":"",w&&document.activeElement&&n.current){let C=document.activeElement.getBoundingClientRect(),F=n.current.getBoundingClientRect(),U=C[w.type]-F[w.type];n.current.scrollTop+=U-w.offset}v(N)}},E);q(L,E),bt(L),Q({ref:r,onResize:L}),Q({ref:l,onResize:L});let b=B.useRef(!1);q(()=>{let w,T=()=>{b.current=!0,clearTimeout(w),w=setTimeout(()=>{b.current=!1},500),L()},S=()=>{b.current&&T()};return x==null||x.addEventListener("resize",T),x==null||x.addEventListener("scroll",S),()=>{x==null||x.removeEventListener("resize",T),x==null||x.removeEventListener("scroll",S)}},[L]);let _=B.useCallback(()=>{b.current||d==null||d()},[d,b]);ht({triggerRef:l,isOpen:a,onClose:d&&_});var R,H;return{overlayProps:{style:{position:"absolute",zIndex:1e5,...m==null?void 0:m.position,maxHeight:(R=m==null?void 0:m.maxHeight)!==null&&R!==void 0?R:"100vh"}},placement:(H=m==null?void 0:m.placement)!==null&&H!==void 0?H:null,arrowProps:{"aria-hidden":"true",role:"presentation",style:{left:m==null?void 0:m.arrowOffsetLeft,top:m==null?void 0:m.arrowOffsetTop}},updatePosition:L}}function bt(e){q(()=>(window.addEventListener("resize",e,!1),()=>{window.removeEventListener("resize",e,!1)}),[e])}function xt(e,t){return t==="rtl"?e.replace("start","right").replace("end","left"):e.replace("start","left").replace("end","right")}export{Tt as $,$t as a,J as b,Ct as c};
