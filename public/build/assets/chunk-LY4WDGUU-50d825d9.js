import{r as l,u as be,j as d,F as G,_ as $e}from"./app-1e18f165.js";import{a as ve,$ as he}from"./useOverlayTriggerState-20dfbcae.js";import{$ as O,d as Te,o as xe,f as ge}from"./focusSafely-0d0e41b4.js";import{a as Pe,d as ye}from"./useFocusable-37bc966c.js";import{$ as Z}from"./useHover-fbcb60c8.js";import{$ as Oe}from"./useOverlayPosition-f27a92c9.js";import{m as we,c as Ce,f as De}from"./chunk-UWE6H66T-765a7095.js";import{p as J,g as Q,t as Ee,b as Re}from"./chunk-WQVQ7P2I-846db4ca.js";import{f as Ae,a as E}from"./chunk-XHQUSKIE-c5e0d731.js";import{o as _e}from"./chunk-RFEIBVIG-7ed02666.js";import{m as je}from"./chunk-CIZQCQPA-524a6271.js";import{u as Ie}from"./index-43d4f642.js";import{a as Ne}from"./chunk-736YWA4T-0c999bc3.js";import{w as Le}from"./chunk-RFUEKIFS-0ac119b0.js";import{L as He,m as Se,A as ke}from"./proxy-1822e291.js";const Fe=1500,X=500;let P={},Ve=0,_=!1,x=null,y=null;function Me(e={}){let{delay:o=Fe,closeDelay:n=X}=e,{isOpen:a,open:u,close:f}=ve(e),r=l.useMemo(()=>`${++Ve}`,[]),t=l.useRef(null),m=l.useRef(f),b=()=>{P[r]=p},h=()=>{for(let i in P)i!==r&&(P[i](!0),delete P[i])},T=()=>{t.current&&clearTimeout(t.current),t.current=null,h(),b(),_=!0,u(),x&&(clearTimeout(x),x=null),y&&(clearTimeout(y),y=null)},p=i=>{i||n<=0?(t.current&&clearTimeout(t.current),t.current=null,m.current()):t.current||(t.current=setTimeout(()=>{t.current=null,m.current()},n)),x&&(clearTimeout(x),x=null),_&&(y&&clearTimeout(y),y=setTimeout(()=>{delete P[r],y=null,_=!1},Math.max(X,n)))},s=()=>{h(),b(),!a&&!x&&!_?x=setTimeout(()=>{x=null,_=!0,T()},o):a||T()};return l.useEffect(()=>{m.current=f},[f]),l.useEffect(()=>()=>{t.current&&clearTimeout(t.current),P[r]&&delete P[r]},[r]),{isOpen:a,open:i=>{!i&&o>0&&!t.current?s():T()},close:p}}function ze(e,o){let n=Pe(e,{labelable:!0}),{hoverProps:a}=Z({onHoverStart:()=>o==null?void 0:o.open(!0),onHoverEnd:()=>o==null?void 0:o.close()});return{tooltipProps:O(n,a,{role:"tooltip"})}}function Ke(e,o,n){let{isDisabled:a,trigger:u}=e,f=Te(),r=l.useRef(!1),t=l.useRef(!1),m=()=>{(r.current||t.current)&&o.open(t.current)},b=c=>{!r.current&&!t.current&&o.close(c)};l.useEffect(()=>{let c=D=>{n&&n.current&&D.key==="Escape"&&(D.stopPropagation(),o.close(!0))};if(o.isOpen)return document.addEventListener("keydown",c,!0),()=>{document.removeEventListener("keydown",c,!0)}},[n,o]);let h=()=>{u!=="focus"&&(xe()==="pointer"?r.current=!0:r.current=!1,m())},T=()=>{u!=="focus"&&(t.current=!1,r.current=!1,b())},p=()=>{t.current=!1,r.current=!1,b(!0)},s=()=>{ge()&&(t.current=!0,m())},i=()=>{t.current=!1,r.current=!1,b(!0)},{hoverProps:w}=Z({isDisabled:a,onHoverStart:h,onHoverEnd:T}),{focusableProps:C}=ye({isDisabled:a,onFocus:s,onBlur:i},n);return{triggerProps:{"aria-describedby":o.isOpen?f:void 0,...O(C,w,{onPointerDown:p,onKeyDown:p})},tooltipProps:{id:f}}}function Be(e){var o,n;const a=be(),[u,f]=we(e,J.variantKeys),{ref:r,as:t,isOpen:m,content:b,children:h,defaultOpen:T,onOpenChange:p,isDisabled:s,trigger:i,shouldFlip:w=!0,containerPadding:C=12,placement:c="top",delay:D=0,closeDelay:k=500,showArrow:$=!1,offset:M=7,crossOffset:te=0,isDismissable:oe,shouldCloseOnBlur:re=!0,portalContainer:le,isKeyboardDismissDisabled:se=!1,updatePositionDeps:z=[],shouldCloseOnInteractOutside:ne,className:ae,onClose:K,motionProps:ie,classNames:R,...F}=u,ce=t||"div",V=(n=(o=e==null?void 0:e.disableAnimation)!=null?o:a==null?void 0:a.disableAnimation)!=null?n:!1,A=Me({delay:D,closeDelay:k,isDisabled:s,defaultOpen:T,isOpen:m,onOpenChange:g=>{p==null||p(g),g||K==null||K()}}),j=l.useRef(null),I=l.useRef(null),N=l.useId(),v=A.isOpen&&!s;l.useImperativeHandle(r,()=>Ae(I));const{triggerProps:B,tooltipProps:de}=Ke({isDisabled:s,trigger:i},A,j),{tooltipProps:U}=ze({isOpen:v,...O(u,de)},A),{overlayProps:W,placement:L,updatePosition:ue}=Oe({isOpen:v,targetRef:j,placement:Ee(c),overlayRef:I,offset:$?M+3:M,crossOffset:te,shouldFlip:w,containerPadding:C});Ie(()=>{z.length&&ue()},z);const{overlayProps:Y}=he({isOpen:v,onClose:A.close,isDismissable:oe,shouldCloseOnBlur:re,isKeyboardDismissDisabled:se,shouldCloseOnInteractOutside:ne},I),H=l.useMemo(()=>{var g,S,q;return J({...f,disableAnimation:V,radius:(g=e==null?void 0:e.radius)!=null?g:"md",size:(S=e==null?void 0:e.size)!=null?S:"md",shadow:(q=e==null?void 0:e.shadow)!=null?q:"sm"})},[_e(f),V,e==null?void 0:e.radius,e==null?void 0:e.size,e==null?void 0:e.shadow]),fe=l.useCallback((g={},S=null)=>({...O(B,g),ref:je(S,j),"aria-describedby":v?N:void 0}),[B,v,N,A]),pe=l.useCallback(()=>({ref:I,"data-slot":"base","data-open":E(v),"data-arrow":E($),"data-disabled":E(s),"data-placement":Q(L||"top",c),...O(U,Y,F),style:O(W.style,F.style,u.style),className:H.base({class:R==null?void 0:R.base}),id:N}),[H,v,$,s,L,c,U,Y,F,W,u,N]),me=l.useCallback(()=>({"data-slot":"content","data-open":E(v),"data-arrow":E($),"data-disabled":E(s),"data-placement":Q(L||"top",c),className:H.content({class:Ce(R==null?void 0:R.content,ae)})}),[H,v,$,s,L,c,R]);return{Component:ce,content:b,children:h,isOpen:v,triggerRef:j,showArrow:$,portalContainer:le,placement:c,disableAnimation:V,isDisabled:s,motionProps:ie,getTooltipContentProps:me,getTriggerProps:fe,getTooltipProps:pe}}var Ue=()=>$e(()=>import("./index-372f0e6c.js"),["assets/index-372f0e6c.js","assets/features-animation-de37ffcd.js","assets/create-visual-element-9a8f1057.js","assets/create-factory-27ee3d52.js","assets/app-1e18f165.js","assets/app-bc3ce7a4.css","assets/accelerated-values-d283ed35.js"]).then(e=>e.default),ee=De((e,o)=>{const{Component:n,children:a,content:u,isOpen:f,portalContainer:r,placement:t,disableAnimation:m,motionProps:b,getTriggerProps:h,getTooltipProps:T,getTooltipContentProps:p}=Be({...e,ref:o});let s;try{if(l.Children.count(a)!==1)throw new Error;if(!l.isValidElement(a))s=d.jsx("p",{...h(),children:a});else{const $=a;s=l.cloneElement($,h($.props,$.ref))}}catch{s=d.jsx("span",{}),Le("Tooltip must have only one child node. Please, check your code.")}const{ref:i,id:w,style:C,...c}=T(),D=d.jsx("div",{ref:i,id:w,style:C,children:d.jsx(He,{features:Ue,children:d.jsx(Se.div,{animate:"enter",exit:"exit",initial:"exit",variants:Ne.scaleSpring,...O(b,c),style:{...Re(t)},children:d.jsx(n,{...p(),children:u})})})});return d.jsxs(d.Fragment,{children:[s,m&&f?d.jsx(G,{portalContainer:r,children:d.jsx("div",{ref:i,id:w,style:C,...c,children:d.jsx(n,{...p(),children:u})})}):d.jsx(ke,{children:f?d.jsx(G,{portalContainer:r,children:D}):null})]})});ee.displayName="NextUI.Tooltip";var at=ee;export{at as t};
