import{q as v,r as m,j as r,b as S}from"./app-1e18f165.js";import{h as w,a as y}from"./swalHelper-619e6f4c.js";import{u as C}from"./index-ab6bc43a.js";import{m as N,a as D,b as E,c as I}from"./chunk-KMN6V4NS-45834527.js";import{m as P}from"./chunk-3S23ARPO-e576983a.js";import{i as l}from"./chunk-I5HUX6BY-4a12b416.js";import{s as k,l as q}from"./chunk-2YPZVDEL-bf6f6b01.js";import{c as F}from"./chunk-DIDTODIV-3b82c78c.js";import{c as K}from"./chunk-HXAHOPG7-10013daf.js";import{b as i}from"./chunk-DBLREEYE-6b14ae71.js";import"./sweetalert2.all-e79fa271.js";import"./sweetalert2-react-content.es-29b1c2f4.js";import"./focusSafely-0d0e41b4.js";import"./useControlledState-0b6c3be6.js";import"./index-1034a95c.js";import"./index-43d4f642.js";import"./chunk-UWE6H66T-765a7095.js";import"./index-4be7962f.js";import"./chunk-XHQUSKIE-c5e0d731.js";import"./chunk-736YWA4T-0c999bc3.js";import"./useDialog-1281e82d.js";import"./useLabels-bd056dc8.js";import"./useLocalizedStringFormatter-6dfb6611.js";import"./VisuallyHidden-6788c411.js";import"./useFocusable-37bc966c.js";import"./Overlay-e3689e7a.js";import"./getScrollParent-84ae6cc8.js";import"./FocusScope-34698c61.js";import"./proxy-1822e291.js";import"./create-factory-27ee3d52.js";import"./useOverlayTriggerState-20dfbcae.js";import"./index-dc85cc98.js";import"./chunk-RFEIBVIG-7ed02666.js";import"./mergeRefs-2b78dc7b.js";import"./chunk-Y3N5MZNS-a1e06c6b.js";import"./chunk-RJKRL3AU-284c64b8.js";import"./useHover-fbcb60c8.js";import"./chunk-CAFRINWI-f16a5c27.js";import"./chunk-RFUEKIFS-0ac119b0.js";import"./useFormReset-2e1c4ba3.js";import"./useField-e75fa2b3.js";import"./useLabel-5cfcb98f.js";import"./useFormValidation-711bb887.js";import"./chunk-YBBOLEEC-f43d4461.js";import"./useMenuTriggerState-2cd95046.js";import"./SelectionManager-72778fb6.js";import"./useCollator-f8b7b7a1.js";import"./useOverlayTrigger-69319b45.js";import"./useOverlayPosition-f27a92c9.js";import"./useResizeObserver-1f814b9f.js";import"./useListBoxSection-2ad159ad.js";import"./chunk-ELWWYGWQ-69dda2d8.js";import"./chunk-WQVQ7P2I-846db4ca.js";import"./chunk-GQT3YUX3-05826e1a.js";import"./chunk-7F3ZLNJ6-bf78ceb0.js";import"./chunk-TDOFO53L-d21b4ec9.js";import"./useCheckboxGroupItem-fe2e6ce0.js";import"./chunk-CIZQCQPA-524a6271.js";import"./chunk-6NL67ZRH-a7aa1da5.js";function Te(){const{roles:p,categories:n}=v().props,{isOpen:c,onOpen:d,onOpenChange:u}=C(),[f,a]=m.useState({reportName:"",urlData:{data:""},roles:[],category:""}),[s,h]=m.useState([]),x=t=>a(e=>({...e,reportName:t.target.value})),g=t=>{const e={data:t.target.value};a(o=>({...o,urlData:e}))},b=t=>{a(e=>({...e,category:t.target.value}))},j=t=>{let e=[...s];if(t.target.checked)e=[...s,t.target.value];else{const o=e.indexOf(t.target.value);o!==-1&&e.splice(o,1)}h(e),a(o=>({...o,roles:e}))},_=async t=>{t.preventDefault();try{const e=await S.post(route("kpi.reports.store"),f);if(e.status!==201)throw new Error("Error al crear el Kpi");w({message:e.data.message}).then(o=>{o.isConfirmed&&window.location.reload()}),console.log(e)}catch(e){y({message:e.message})}};return r.jsxs(r.Fragment,{children:[r.jsx(i,{color:"primary",onPress:d,children:"Nuevo KPI"}),r.jsx(N,{isOpen:c,onOpenChange:u,placement:"top-center",backdrop:"blur",children:r.jsx(D,{children:t=>r.jsxs("form",{onSubmit:_,children:[r.jsx(P,{className:"flex flex-col gap-1",children:"Insertar Nuevo Informe"}),r.jsxs(E,{children:[r.jsx(l,{autoFocus:!0,label:"Nombre del informe",name:"reportName",placeholder:"Ejm: Reporte de Ventas",variant:"bordered",required:!0,onChange:x}),r.jsx(l,{autoFocus:!0,label:"Url",name:"urlData",placeholder:'Ejm :  <iframe src="urldelinformedePowerby" ... />',variant:"bordered",required:!0,onChange:g}),r.jsx(k,{label:"Seleccione la categoria del KPI",className:"max-w",onChange:b,children:n.map(e=>r.jsx(q,{value:e.id,children:e.category},e.id))})]}),r.jsx(F,{label:"Seleccione los roles que deseen ver este Informe",color:"primary",className:"mx-8",children:p.map(({id:e,name:o})=>r.jsx(K,{value:e,onChange:j,children:o},e))}),r.jsxs(I,{children:[r.jsx(i,{color:"danger",variant:"flat",onPress:t,children:"Cerrar"}),r.jsx(i,{color:"primary",onPress:t,type:"submit",children:"Mostrar"})]})]})})})]})}export{Te as default};
