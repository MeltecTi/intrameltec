import{r as g}from"./app-1e18f165.js";import{$ as S}from"./focusSafely-0d0e41b4.js";import{$ as p,b as O,c as R,d as B}from"./useFormValidation-711bb887.js";import{c as V,d as q,a as C}from"./useFocusable-37bc966c.js";import{$ as E}from"./useFormReset-2e1c4ba3.js";import{$ as k}from"./useControlledState-0b6c3be6.js";function L(e,a,l){let{isDisabled:i=!1,isReadOnly:d=!1,value:n,name:b,children:t,"aria-label":f,"aria-labelledby":s,validationState:u="valid",isInvalid:r}=e,v=y=>{y.stopPropagation(),a.setSelected(y.target.checked)},m=t!=null,o=f!=null||s!=null;!m&&!o&&console.warn("If you do not provide children, you must specify an aria-label for accessibility");let{pressProps:$,isPressed:c}=V({isDisabled:i}),{pressProps:P,isPressed:h}=V({isDisabled:i||d,onPress(){a.toggle()}}),{focusableProps:x}=q(e,l),I=S($,x),D=C(e,{labelable:!0});return E(l,a.isSelected,a.setSelected),{labelProps:S(P,{onClick:y=>y.preventDefault()}),inputProps:S(D,{"aria-invalid":r||u==="invalid"||void 0,"aria-errormessage":e["aria-errormessage"],"aria-controls":e["aria-controls"],"aria-readonly":d||void 0,onChange:v,disabled:i,...n==null?{}:{value:n},name:b,type:"checkbox",...I}),isSelected:a.isSelected,isPressed:c||h,isDisabled:i,isReadOnly:d,isInvalid:r||u==="invalid"}}function _(e,a,l){let i=p({...e,value:a.isSelected}),{isInvalid:d,validationErrors:n,validationDetails:b}=i.displayValidation,{labelProps:t,inputProps:f,isSelected:s,isPressed:u,isDisabled:r,isReadOnly:v}=L({...e,isInvalid:d},a,l);O(e,i,l);let{isIndeterminate:m,isRequired:o,validationBehavior:$="aria"}=e;g.useEffect(()=>{l.current&&(l.current.indeterminate=!!m)});let{pressProps:c}=V({isDisabled:r||v,onPress(){let{[R]:P}=e,{commitValidation:h}=P||i;h()}});return{labelProps:S(t,c),inputProps:{...f,checked:s,"aria-required":o&&$==="aria"||void 0,required:o&&$==="native"},isSelected:s,isPressed:u,isDisabled:r,isReadOnly:v,isInvalid:d,validationErrors:n,validationDetails:b}}const M=new WeakMap;function w(e={}){let{isReadOnly:a}=e,[l,i]=k(e.isSelected,e.defaultSelected||!1,e.onChange);function d(b){a||i(b)}function n(){a||i(!l)}return{isSelected:l,setSelected:d,toggle:n}}function H(e,a,l){const i=w({isReadOnly:e.isReadOnly||a.isReadOnly,isSelected:a.isSelected(e.value),onChange(c){c?a.addValue(e.value):a.removeValue(e.value),e.onChange&&e.onChange(c)}});let{name:d,descriptionId:n,errorMessageId:b,validationBehavior:t}=M.get(a);var f;t=(f=e.validationBehavior)!==null&&f!==void 0?f:t;let{realtimeValidation:s}=p({...e,value:i.isSelected,name:void 0,validationBehavior:"aria"}),u=g.useRef(B),r=()=>{a.setInvalid(e.value,s.isInvalid?s:u.current)};g.useEffect(r);let v=a.realtimeValidation.isInvalid?a.realtimeValidation:s,m=t==="native"?a.displayValidation:v;var o;let $=_({...e,isReadOnly:e.isReadOnly||a.isReadOnly,isDisabled:e.isDisabled||a.isDisabled,name:e.name||d,isRequired:(o=e.isRequired)!==null&&o!==void 0?o:a.isRequired,validationBehavior:t,[R]:{realtimeValidation:v,displayValidation:m,resetValidation:a.resetValidation,commitValidation:a.commitValidation,updateValidation(c){u.current=c,r()}}},i,l);return{...$,inputProps:{...$.inputProps,"aria-describedby":[e["aria-describedby"],a.isInvalid?b:null,n].filter(Boolean).join(" ")||void 0}}}export{M as $,w as a,H as b,_ as c};
