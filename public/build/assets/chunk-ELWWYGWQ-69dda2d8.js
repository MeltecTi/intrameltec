import{r as b,u as Se,j as v,_ as _e}from"./app-1e18f165.js";import{$ as ke}from"./useOverlayPosition-f27a92c9.js";import{$ as De,a as Fe}from"./useOverlayTriggerState-20dfbcae.js";import{t as we,p as Y,g as Q,a as Ie,b as je}from"./chunk-WQVQ7P2I-846db4ca.js";import{$ as w}from"./focusSafely-0d0e41b4.js";import{u as Le}from"./index-43d4f642.js";import{u as Me,a as F}from"./chunk-XHQUSKIE-c5e0d731.js";import{$ as We}from"./useFocusable-37bc966c.js";import{$ as Be}from"./useOverlayTrigger-69319b45.js";import{$ as Ve,b as Ke}from"./Overlay-e3689e7a.js";import{b as qe,$ as He,a as Z}from"./useDialog-1281e82d.js";import{m as Ue,c as B,f as ee}from"./chunk-UWE6H66T-765a7095.js";import{$ as Je}from"./mergeRefs-2b78dc7b.js";import{o as ze}from"./chunk-RFEIBVIG-7ed02666.js";import{a as te}from"./chunk-736YWA4T-0c999bc3.js";import{L as oe,m as se}from"./proxy-1822e291.js";var M=new WeakMap,m=[];function Ge(o,r=document.body){let n=new Set(o),s=new Set,u=e=>{for(let d of e.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))n.add(d);let a=d=>{const $=d.parentElement;if(n.has(d)||s.has($)&&$.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let P of n)if(d.contains(P))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a}),x=a(e);if(x===NodeFilter.FILTER_ACCEPT&&c(e),x!==NodeFilter.FILTER_REJECT){let d=t.nextNode();for(;d!=null;)c(d),d=t.nextNode()}},c=e=>{var a;let t=(a=M.get(e))!=null?a:0;e.getAttribute("aria-hidden")==="true"&&t===0||(t===0&&e.setAttribute("aria-hidden","true"),s.add(e),M.set(e,t+1))};m.length&&m[m.length-1].disconnect(),u(r);let l=new MutationObserver(e=>{for(let a of e)if(!(a.type!=="childList"||a.addedNodes.length===0)&&![...n,...s].some(t=>t.contains(a.target))){for(let t of a.removedNodes)t instanceof Element&&(n.delete(t),s.delete(t));for(let t of a.addedNodes)(t instanceof HTMLElement||t instanceof SVGElement)&&(t.dataset.liveAnnouncer==="true"||t.dataset.reactAriaTopLayer==="true")?n.add(t):t instanceof Element&&u(t)}});l.observe(r,{childList:!0,subtree:!0});let f={observe(){l.observe(r,{childList:!0,subtree:!0})},disconnect(){l.disconnect()}};return m.push(f),()=>{l.disconnect();for(let e of s){let a=M.get(e);a!=null&&(a===1?(e.removeAttribute("aria-hidden"),M.delete(e)):M.set(e,a-1))}f===m[m.length-1]?(m.pop(),m.length&&m[m.length-1].observe()):m.splice(m.indexOf(f),1)}}var Xe=(o,r,n)=>{const s=r==null?void 0:r.current;if(!s||!s.contains(o)){const u=document.querySelectorAll("body > span[data-focus-scope-start]");let c=[];if(u.forEach(l=>{c.push(l.nextElementSibling)}),c.length===1)return n.close(),!1}return!s||!s.contains(o)};function Ye(o,r){const{triggerRef:n,popoverRef:s,showArrow:u,offset:c=7,crossOffset:l=0,scrollRef:f,shouldFlip:e,boundaryElement:a,isDismissable:t=!0,shouldCloseOnBlur:x=!0,shouldCloseOnScroll:d=!0,placement:$="top",containerPadding:P,shouldCloseOnInteractOutside:y,isNonModal:C,isKeyboardDismissDisabled:E,updatePositionDeps:R=[],...T}=o,N=C??!0,{overlayProps:I,underlayProps:V}=De({isOpen:r.isOpen,onClose:r.close,shouldCloseOnBlur:x,isDismissable:t,isKeyboardDismissDisabled:E,shouldCloseOnInteractOutside:y||(A=>Xe(A,n,r))},s),{overlayProps:K,arrowProps:q,placement:h,updatePosition:H}=ke({...T,shouldFlip:e,crossOffset:l,targetRef:n,overlayRef:s,isOpen:r.isOpen,scrollRef:f,boundaryElement:a,containerPadding:P,placement:we($),offset:u?c+3:c,onClose:N&&d?r.close:()=>{}});return Le(()=>{R.length&&H()},R),b.useEffect(()=>{if(r.isOpen&&!N&&s.current)return Ge([s.current])},[N,r.isOpen,s]),{popoverProps:w(I,K),arrowProps:q,underlayProps:V,placement:h}}function Qe(o){var r,n,s;const u=Se(),[c,l]=Ue(o,Y.variantKeys),{as:f,ref:e,children:a,state:t,triggerRef:x,scrollRef:d,defaultOpen:$,onOpenChange:P,isOpen:y,isNonModal:C=!0,shouldFlip:E=!0,containerPadding:R=12,shouldBlockScroll:T=!1,isDismissable:N=!0,shouldCloseOnBlur:I,portalContainer:V,updatePositionDeps:K,dialogProps:q,placement:h="top",triggerType:H="dialog",showArrow:A=!1,offset:le=7,crossOffset:ie=0,boundaryElement:ce,isKeyboardDismissDisabled:de,shouldCloseOnInteractOutside:pe,shouldCloseOnScroll:ue,motionProps:fe,className:me,classNames:g,onClose:U,...J}=c,be=f||"div",O=Me(e),ve=b.useRef(null),W=b.useRef(!1),j=x||ve,ge=(n=(r=o.disableAnimation)!=null?r:u==null?void 0:u.disableAnimation)!=null?n:!1,Pe=Fe({isOpen:y,defaultOpen:$,onOpenChange:i=>{P==null||P(i),i||U==null||U()}}),p=t||Pe,{popoverProps:z,underlayProps:G,placement:S}=Ye({triggerRef:j,isNonModal:C,popoverRef:O,placement:h,offset:le,scrollRef:d,isDismissable:N,shouldCloseOnBlur:I,boundaryElement:ce,crossOffset:ie,shouldFlip:E,containerPadding:R,updatePositionDeps:K,isKeyboardDismissDisabled:de,shouldCloseOnScroll:ue,shouldCloseOnInteractOutside:pe},p),{triggerProps:_}=Be({type:H},p,j),{isFocusVisible:he,isFocused:xe,focusProps:$e}=We(),k=b.useMemo(()=>Y({...l}),[ze(l)]),Oe=B(g==null?void 0:g.base,me);Ve({isDisabled:!(T&&p.isOpen)});const Ce=(i={})=>({ref:O,...w(z,J,i),style:w(z.style,J.style,i.style)}),Ne=(i={})=>({"data-slot":"base","data-open":F(p.isOpen),"data-focus":F(xe),"data-arrow":F(A),"data-focus-visible":F(he),"data-placement":Q(S||"top",h),...w($e,q,i),className:k.base({class:B(Oe)}),style:{outline:"none"}}),ye=b.useCallback((i={})=>({"data-slot":"content","data-open":F(p.isOpen),"data-arrow":F(A),"data-placement":Q(S||"top",h),className:k.content({class:B(g==null?void 0:g.content,i.className)})}),[k,p.isOpen,A,S,h,g]),Ee=b.useMemo(()=>Ie(S||"top",h)&&S||h,[S,h]),X=b.useCallback(i=>{var D;let L;return i.pointerType==="touch"&&((o==null?void 0:o.backdrop)==="blur"||(o==null?void 0:o.backdrop)==="opaque")?L=setTimeout(()=>{W.current=!0},100):W.current=!0,(D=_.onPress)==null||D.call(_,i),()=>{clearTimeout(L)}},[_==null?void 0:_.onPress]),Re=b.useCallback((i={},D=null)=>{const{isDisabled:L,...Ae}=i;return{"data-slot":"trigger",...w({"aria-haspopup":"dialog"},_,Ae),onPress:X,isDisabled:L,className:k.trigger({class:B(g==null?void 0:g.trigger,i.className),isTriggerDisabled:L}),ref:Je(D,j)}},[p,_,X,j]),Te=b.useCallback((i={})=>({"data-slot":"backdrop",className:k.backdrop({class:g==null?void 0:g.backdrop}),onClick:D=>{if(!W.current){D.preventDefault();return}p.close(),W.current=!1},...G,...i}),[k,p.isOpen,g,G]);return b.useEffect(()=>{if(p.isOpen&&(O!=null&&O.current))return qe([O==null?void 0:O.current])},[p.isOpen,O]),{state:p,Component:be,children:a,classNames:g,showArrow:A,triggerRef:j,placement:Ee,isNonModal:C,popoverRef:O,portalContainer:V,isOpen:p.isOpen,onClose:p.close,disableAnimation:ge,shouldBlockScroll:T,backdrop:(s=o.backdrop)!=null?s:"transparent",motionProps:fe,getBackdropProps:Te,getPopoverProps:Ce,getTriggerProps:Re,getDialogProps:Ne,getContentProps:ye}}var re=()=>_e(()=>import("./index-372f0e6c.js"),["assets/index-372f0e6c.js","assets/features-animation-de37ffcd.js","assets/create-visual-element-9a8f1057.js","assets/create-factory-27ee3d52.js","assets/app-1e18f165.js","assets/app-bc3ce7a4.css","assets/accelerated-values-d283ed35.js"]).then(o=>o.default),ae=ee(({children:o,motionProps:r,placement:n,disableAnimation:s,style:u={},transformOrigin:c={},...l},f)=>{let e=u;return c.originX!==void 0||c.originY!==void 0?e={...e,transformOrigin:c}:e={...e,...je(n==="center"?"top":n)},s?v.jsx("div",{...l,ref:f,children:o}):v.jsx(oe,{features:re,children:v.jsx(se.div,{ref:f,animate:"enter",exit:"exit",initial:"initial",style:e,variants:te.scaleSpringOpacity,...w(l,r),children:o})})});ae.displayName="NextUI.FreeSoloPopoverWrapper";var ne=ee(({children:o,transformOrigin:r,disableDialogFocus:n=!1,...s},u)=>{const{Component:c,state:l,placement:f,backdrop:e,portalContainer:a,disableAnimation:t,motionProps:x,isNonModal:d,getPopoverProps:$,getBackdropProps:P,getDialogProps:y,getContentProps:C}=Qe({...s,ref:u}),E=b.useRef(null),{dialogProps:R,titleProps:T}=He({},E),N=y({...!n&&{ref:E},...R}),I=b.useMemo(()=>e==="transparent"?null:t?v.jsx("div",{...P()}):v.jsx(oe,{features:re,children:v.jsx(se.div,{animate:"enter",exit:"exit",initial:"exit",variants:te.fade,...P()})}),[e,t,P]);return v.jsxs(Ke,{portalContainer:a,children:[!d&&I,v.jsx(c,{...$(),children:v.jsxs(ae,{disableAnimation:t,motionProps:x,placement:f,tabIndex:-1,transformOrigin:r,...N,children:[!d&&v.jsx(Z,{onDismiss:l.close}),v.jsx("div",{...C(),children:typeof o=="function"?o(T):o}),v.jsx(Z,{onDismiss:l.close})]})})]})});ne.displayName="NextUI.FreeSoloPopover";var bt=ne;export{Xe as a,bt as f};
