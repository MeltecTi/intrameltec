import{W as c,r as D,j as t,b as I}from"./app-1e18f165.js";import{D as L,C as E,S as T}from"./initialValues-a5c08fbc.js";import{y as A}from"./calculatedTotal-5b9ec2cb.js";import{u as f}from"./useLocalStorage-c370666f.js";import{S as R}from"./sweetalert2.all-e79fa271.js";import{w as _}from"./sweetalert2-react-content.es-29b1c2f4.js";import{i}from"./chunk-I5HUX6BY-4a12b416.js";import{s as B,l as U}from"./chunk-2YPZVDEL-bf6f6b01.js";import{b}from"./chunk-DBLREEYE-6b14ae71.js";import"./chunk-Y3N5MZNS-a1e06c6b.js";import"./chunk-UWE6H66T-765a7095.js";import"./index-4be7962f.js";import"./index-43d4f642.js";import"./useFocusable-37bc966c.js";import"./focusSafely-0d0e41b4.js";import"./chunk-XHQUSKIE-c5e0d731.js";import"./chunk-RJKRL3AU-284c64b8.js";import"./useHover-fbcb60c8.js";import"./chunk-CAFRINWI-f16a5c27.js";import"./chunk-RFUEKIFS-0ac119b0.js";import"./chunk-RFEIBVIG-7ed02666.js";import"./useControlledState-0b6c3be6.js";import"./useFormReset-2e1c4ba3.js";import"./useField-e75fa2b3.js";import"./useLabel-5cfcb98f.js";import"./useLabels-bd056dc8.js";import"./useFormValidation-711bb887.js";import"./chunk-YBBOLEEC-f43d4461.js";import"./mergeRefs-2b78dc7b.js";import"./useMenuTriggerState-2cd95046.js";import"./SelectionManager-72778fb6.js";import"./FocusScope-34698c61.js";import"./useCollator-f8b7b7a1.js";import"./getScrollParent-84ae6cc8.js";import"./useLocalizedStringFormatter-6dfb6611.js";import"./useOverlayTrigger-69319b45.js";import"./useOverlayPosition-f27a92c9.js";import"./useResizeObserver-1f814b9f.js";import"./useOverlayTriggerState-20dfbcae.js";import"./index-dc85cc98.js";import"./useListBoxSection-2ad159ad.js";import"./chunk-ELWWYGWQ-69dda2d8.js";import"./chunk-WQVQ7P2I-846db4ca.js";import"./chunk-GQT3YUX3-05826e1a.js";import"./Overlay-e3689e7a.js";import"./useDialog-1281e82d.js";import"./VisuallyHidden-6788c411.js";import"./chunk-736YWA4T-0c999bc3.js";import"./proxy-1822e291.js";import"./create-factory-27ee3d52.js";import"./chunk-7F3ZLNJ6-bf78ceb0.js";import"./chunk-TDOFO53L-d21b4ec9.js";import"./chunk-6NL67ZRH-a7aa1da5.js";const l=_(R),O=({title:s,text:e,icon:o,loading:m})=>l.fire({title:s,text:e,icon:o,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",allowOutsideClick:!1,didClose:()=>{m&&l.showLoading({title:"Generando cotizaciones, por favor espere",allowEscapeKey:!1,allowOutsideClick:!1})}}),M=({response:s})=>l.fire({icon:"success",title:"¡Éxito!",text:s.data.message}),k=()=>l.fire({icon:"error",title:"Oops...",text:"Hubo un error al crear el Servidor"}),qe=({client:s,calculator:e,total:o,handleClientUpdate:m,handleCalculatorUpdate:u,handleTotalUpdate:v,auth:q})=>{const[S,d]=f("yearTotal",0),[h,j]=f("discount",0),{data:g,setData:y}=c({client:"",serverParts:"",total:"",yearTotal:"",discount:""}),[C,p]=D.useState(!1),x=()=>{window.localStorage.removeItem("client"),window.localStorage.removeItem("serverParts"),window.localStorage.removeItem("total"),window.localStorage.removeItem("yearTotal"),window.localStorage.removeItem("discount"),m(E),u(T),v(0),d(0)},N=n=>{const r=o!==""?parseFloat(o):0,a=parseInt(n.target.value),P=A({discount:a,subtotal:r});j(a),d(P),y({client:localStorage.getItem("client"),serverParts:localStorage.getItem("serverParts"),total:localStorage.getItem("total"),yearTotal:localStorage.getItem("yearTotal"),discount:localStorage.getItem("discount")})},w=async n=>{n.preventDefault();try{if(p(!0),(await O({title:"¿Estas Seguro?",text:"Esta accion no se podra deshacer",icon:"warning",loading:C})).isConfirmed){const a=await I.post("/api/createServer",g);(!a.ok||a.status!==201)&&k(),M({response:a}),x()}}catch(r){console.error(r)}finally{p(!1)}};return t.jsx("div",{className:"lg:col-span-6",children:t.jsxs("form",{onSubmit:w,children:[t.jsx("h2",{className:"text-center my-5 font-bold text-xl",children:"Cliente"}),t.jsxs("div",{className:"grid gap-2 grid-cols-2",children:[t.jsx(i,{value:s==null?void 0:s.nameClient,type:"text",isDisabled:!0,label:"Nombre del Cliente",labelPlacement:"outside-left"}),t.jsx(i,{value:s==null?void 0:s.email,type:"email",isDisabled:!0,label:"Correo electronico",labelPlacement:"outside-left"}),t.jsx(i,{value:s==null?void 0:s.phone,type:"tel",isDisabled:!0,label:"Numero de Contacto",labelPlacement:"outside-left"}),t.jsx(i,{value:s==null?void 0:s.identification,type:"number",isDisabled:!0,label:"Identificacion",labelPlacement:"outside-left"})]}),t.jsx("h2",{className:"text-center my-5 font-bold text-xl",children:"Caracteristicas del Servidor"}),t.jsxs("div",{className:"grid gap-2 grid-cols-2",children:[t.jsx(i,{value:e==null?void 0:e.cpuCores,type:"text",isDisabled:!0,label:"Nucleos de Procesador",labelPlacement:"outside-left"}),t.jsx(i,{value:e==null?void 0:e.ram,type:"email",isDisabled:!0,label:"Memoria RAM",labelPlacement:"outside-left",endContent:t.jsx("div",{className:"pointer-events-none flex items-center",children:t.jsx("span",{className:"text-default-400 text-small",children:"GB"})})}),t.jsx(i,{value:e==null?void 0:e.storage,type:"tel",isDisabled:!0,label:"Almacenamiento",labelPlacement:"outside-left",endContent:t.jsx("div",{className:"pointer-events-none flex items-center",children:t.jsx("span",{className:"text-default-400 text-small",children:"GB"})})}),t.jsx(i,{value:e==null?void 0:e.bandwidth,type:"number",isDisabled:!0,label:"Ancho de Banda",labelPlacement:"outside-left",endContent:t.jsx("div",{className:"pointer-events-none flex items-center",children:t.jsx("span",{className:"text-default-400 text-small",children:"MB/S"})})}),t.jsx(i,{value:(e==null?void 0:e.so)!==0?"Windows Server":"Linux",type:"text",isDisabled:!0,label:"Sistema Operativo",labelPlacement:"outside-left"}),t.jsx(i,{value:(e==null?void 0:e.sql2core)!==0?"Si":"No",type:"text",isDisabled:!0,label:"Licencia SQL 2 Core",labelPlacement:"outside-left"}),t.jsx(i,{value:(e==null?void 0:e.rdp)!==0?"Si":"No",type:"text",isDisabled:!0,label:"Licencia RDP SPLA",labelPlacement:"outside-left"}),t.jsx(i,{value:(e==null?void 0:e.ip)!==0?"Si":"No",type:"text",isDisabled:!0,label:"Ip Publica",labelPlacement:"outside-left"}),t.jsx(i,{value:(e==null?void 0:e.sql2extra)!==0?e==null?void 0:e.sql2extra:"Ninguno",type:"text",isDisabled:!0,label:"Usuarios SQL 2 CORE Adicionales",labelPlacement:"outside-left"}),t.jsx(i,{value:(e==null?void 0:e.rdpExtra)!==0?e==null?void 0:e.rdpExtra:"Ninguno",type:"text",isDisabled:!0,label:"Usuarios RDP SPLA Extra",labelPlacement:"outside-left"})]}),t.jsxs("div",{className:"flex justify-end gap-2 my-6",children:[t.jsxs("h3",{className:"font-semibold self-center",children:["Total Servidor: $ ",o!==""?parseFloat(o).toFixed(2):0," USD/Mes"]}),t.jsx(B,{className:"max-w-xs",placeholder:"Tiempo de Contrato del Servicio",label:"Tiempo de Contrato",onChange:N,isRequired:!0,value:h,children:L.map(({label:n,value:r})=>t.jsx(U,{value:r,children:n},r))})]}),t.jsx("div",{className:"flex justify-end gap-2 my-6",children:t.jsxs("h3",{className:"font-semibold self-center",children:["Total Anual: $",S.toFixed(2)," USD"]})}),t.jsxs("div",{className:"flex justify-end gap-2 my-6",children:[o>0&&t.jsx(b,{type:"submit",children:" Generar Cotizacion "}),t.jsx(b,{onClick:x,children:"Cancelar"})]})]})})};export{qe as Sumnmary};
