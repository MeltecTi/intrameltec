import{r as T,j as e,a as k,b as l}from"./app-1e18f165.js";import w from"./AuthenticatedLayout-35ef529f.js";import{a as y}from"./dateHelper-1fb4c2f0.js";import{e as C}from"./initialValues-a5c08fbc.js";import{h as d,a as N,m as E}from"./swalHelper-619e6f4c.js";import{u as v}from"./index-ab6bc43a.js";import{b as a}from"./chunk-DBLREEYE-6b14ae71.js";import{t as S,a as A,b as B,c,d as D,e as s}from"./chunk-YRZGWF2W-2c8e6c86.js";import{m as F,a as O,b as R,c as q}from"./chunk-KMN6V4NS-45834527.js";import{m as $}from"./chunk-3S23ARPO-e576983a.js";import{i as P}from"./chunk-I5HUX6BY-4a12b416.js";import"./Icons-b91f86eb.js";import"./chunk-GQT3YUX3-05826e1a.js";import"./chunk-UWE6H66T-765a7095.js";import"./index-4be7962f.js";import"./chunk-RFEIBVIG-7ed02666.js";import"./transition-ae3f1835.js";import"./sweetalert2.all-e79fa271.js";import"./sweetalert2-react-content.es-29b1c2f4.js";import"./focusSafely-0d0e41b4.js";import"./useControlledState-0b6c3be6.js";import"./index-1034a95c.js";import"./index-43d4f642.js";import"./chunk-XHQUSKIE-c5e0d731.js";import"./useFocusable-37bc966c.js";import"./chunk-RJKRL3AU-284c64b8.js";import"./index-dc85cc98.js";import"./useHover-fbcb60c8.js";import"./chunk-6NL67ZRH-a7aa1da5.js";import"./proxy-1822e291.js";import"./create-factory-27ee3d52.js";import"./chunk-TDOFO53L-d21b4ec9.js";import"./Cell-ac88c214.js";import"./SelectionManager-72778fb6.js";import"./FocusScope-34698c61.js";import"./useCollator-f8b7b7a1.js";import"./getScrollParent-84ae6cc8.js";import"./LiveAnnouncer-0a9a6b45.js";import"./useLocalizedStringFormatter-6dfb6611.js";import"./chunk-HXAHOPG7-10013daf.js";import"./useCheckboxGroupItem-fe2e6ce0.js";import"./useFormValidation-711bb887.js";import"./useFormReset-2e1c4ba3.js";import"./chunk-CAFRINWI-f16a5c27.js";import"./chunk-RFUEKIFS-0ac119b0.js";import"./chunk-CIZQCQPA-524a6271.js";import"./chunk-YBBOLEEC-f43d4461.js";import"./mergeRefs-2b78dc7b.js";import"./VisuallyHidden-6788c411.js";import"./chunk-7F3ZLNJ6-bf78ceb0.js";import"./chunk-IXXDDLGU-6e35b466.js";import"./chunk-736YWA4T-0c999bc3.js";import"./useDialog-1281e82d.js";import"./useLabels-bd056dc8.js";import"./Overlay-e3689e7a.js";import"./useOverlayTriggerState-20dfbcae.js";import"./chunk-Y3N5MZNS-a1e06c6b.js";import"./useField-e75fa2b3.js";import"./useLabel-5cfcb98f.js";function Ge({auth:i,tokens:n}){const{isOpen:p,onOpen:u,onOpenChange:x}=v(),[h,f]=T.useState({token:""}),j=r=>{const o=r.target.value;f({token:o})},g=async r=>{r.preventDefault();try{const o=await l.post("/generatetokens",h);if(o.status!==200)throw new Error("Error al Crear el Token");d({message:`Tu Token: ${o.data.token.plainTextToken}`,footer:"Recuerda Copiar este Token y guardarlo en un lugar seguro, de lo contrario tendras que generar uno nuevo"}).then(t=>{t.isConfirmed&&window.location.reload()})}catch(o){N({error:o}),console.error(o)}},_=async(r,o)=>{try{E({title:`Eliminar token ${o}`,text:"Â¿Esta seguro de eliminar este Token de Acceso? Esta accion no se podra deshacer",icon:"warning",confirmButtonText:"Confirmar Borrado",cancelButtonText:"Cancelar"}).then(async t=>{if(t.isConfirmed){const m=await l.delete(`/generatetokens/${r}`);m.status===200&&d({message:m.data.message}).then(b=>{b.isConfirmed&&window.location.reload()})}})}catch{}};return e.jsxs(w,{auth:i,header:e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:["Tokens de ",i.user.name]}),children:[e.jsx(k,{title:"Tokens de usuario"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6",children:e.jsxs("div",{className:"p-4 sm:p-8 bg-white shadow sm:rounded-lg",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(a,{color:"primary",onPress:u,children:" Crear Nuevo token "})}),e.jsxs(S,{"aria-label":"Tokens de Acceso de usuario",className:"mt-6 text-center",children:[e.jsx(A,{children:C.map((r,o)=>e.jsx(B,{className:"text-center",children:r},o))}),n.length===0?e.jsx(c,{emptyContent:"No  tienes Tokens de Acceso creados"}):e.jsx(c,{children:n.map(r=>e.jsxs(D,{children:[e.jsx(s,{children:r.id}),e.jsx(s,{children:r.name}),e.jsx(s,{children:y(r.created_at)}),e.jsx(s,{children:e.jsx(a,{color:"danger",onClick:()=>_(r.id,r.name),children:"Borrar"})})]},r.id))})]})]})})}),e.jsx(F,{isOpen:p,onOpenChange:x,children:e.jsx(O,{children:r=>e.jsxs(e.Fragment,{children:[e.jsx($,{className:"flex flex-col gap-1",children:"Crear Nuevo Token"}),e.jsx("form",{onSubmit:g,children:e.jsxs(R,{children:[e.jsx(P,{autoFocus:!0,isRequired:!0,label:"Nombre del Token",placeholder:"Nombre del Servicio para usar el Token",variant:"bordered",onChange:j}),e.jsxs(q,{children:[e.jsx(a,{type:"submit",color:"primary",children:"Crear Token"}),e.jsx(a,{color:"danger",onPress:r,children:"Cancelar"})]})]})})]})})})]})}export{Ge as default};
