import{q as f,j as r,b as l}from"./app-1e18f165.js";import{M as g}from"./Modal-3351711c.js";import{T as w}from"./toastify-e61f9dad.js";import{c as y}from"./chunk-DIDTODIV-3b82c78c.js";import{c as j}from"./chunk-HXAHOPG7-10013daf.js";import"./transition-ae3f1835.js";import"./focusSafely-0d0e41b4.js";import"./useCheckboxGroupItem-fe2e6ce0.js";import"./useFormValidation-711bb887.js";import"./useFocusable-37bc966c.js";import"./useFormReset-2e1c4ba3.js";import"./useControlledState-0b6c3be6.js";import"./useField-e75fa2b3.js";import"./useLabel-5cfcb98f.js";import"./useLabels-bd056dc8.js";import"./chunk-XHQUSKIE-c5e0d731.js";import"./chunk-RJKRL3AU-284c64b8.js";import"./chunk-CAFRINWI-f16a5c27.js";import"./chunk-UWE6H66T-765a7095.js";import"./index-4be7962f.js";import"./chunk-YBBOLEEC-f43d4461.js";import"./mergeRefs-2b78dc7b.js";import"./index-1034a95c.js";import"./index-43d4f642.js";import"./useHover-fbcb60c8.js";import"./chunk-RFUEKIFS-0ac119b0.js";import"./chunk-CIZQCQPA-524a6271.js";import"./VisuallyHidden-6788c411.js";const u=({text:m,color:p,...s})=>w({text:m,duration:3e3,position:"right",style:{background:"#1CAC78"},...s}).showToast();function Q({modal:m,closeModal:p,datamodal:s={},permissions:d}){const{auth:n,csrfToken:c}=f().props,h=n.userPermissions.concat(n.permissions),x=async(e,t,i)=>{var a;if((a=e.target)!=null&&a.checked)try{if((await l.post(route("api.permission.sync"),{user:i,permission:t},{headers:{"X-CSRF-TOKEN":c}})).status!==200)throw new Error("No se pueden guardar los cambios");u({text:"Permisos Actualizados"})}catch(o){console.error(o)}else try{const o=await l.post(route("api.permission.revoke"),{user:i,permission:t},{headers:{"X-CSRF-TOKEN":c}});if(o.status!==200)throw new Error("No se pueden guardar los cambios");u({text:"Permisos Actualizados"}),console.log(o)}catch(o){console.error(o)}};return r.jsx(g,{show:m,onClose:p,children:r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-600 text-center",children:`Agregar permisos para ${s.name}`}),r.jsx("div",{className:"my-6",children:r.jsx(y,{label:"Selecciona los Permisos a Autorizar",defaultValue:h,children:d.map(({id:e,supername:t,name:i})=>r.jsx(j,{value:i,onChange:a=>x(a,e,s.id),children:t},e))})})]})})}export{Q as ModalPermission};
