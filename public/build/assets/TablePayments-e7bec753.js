import{r as i,j as e,b as C}from"./app-1e18f165.js";import{c}from"./currencyFormatter-e68b52bd.js";import{d as v}from"./initialValues-a5c08fbc.js";import{a as m}from"./dateHelper-1fb4c2f0.js";import{S as D}from"./SapLoader-1dbbbffd.js";import{u as E}from"./index-ab6bc43a.js";import{t as R,a as z,b as S,c as F,d as M,e as l}from"./chunk-YRZGWF2W-2c8e6c86.js";import{b as O}from"./chunk-DBLREEYE-6b14ae71.js";import{m as P,a as A,b as T,c as q}from"./chunk-KMN6V4NS-45834527.js";import{m as L}from"./chunk-3S23ARPO-e576983a.js";import"./focusSafely-0d0e41b4.js";import"./useControlledState-0b6c3be6.js";import"./index-1034a95c.js";import"./index-43d4f642.js";import"./chunk-UWE6H66T-765a7095.js";import"./index-4be7962f.js";import"./chunk-XHQUSKIE-c5e0d731.js";import"./chunk-RJKRL3AU-284c64b8.js";import"./Cell-ac88c214.js";import"./SelectionManager-72778fb6.js";import"./FocusScope-34698c61.js";import"./useCollator-f8b7b7a1.js";import"./getScrollParent-84ae6cc8.js";import"./useFocusable-37bc966c.js";import"./LiveAnnouncer-0a9a6b45.js";import"./useLocalizedStringFormatter-6dfb6611.js";import"./chunk-HXAHOPG7-10013daf.js";import"./useCheckboxGroupItem-fe2e6ce0.js";import"./useFormValidation-711bb887.js";import"./useFormReset-2e1c4ba3.js";import"./useHover-fbcb60c8.js";import"./chunk-CAFRINWI-f16a5c27.js";import"./chunk-RFUEKIFS-0ac119b0.js";import"./chunk-CIZQCQPA-524a6271.js";import"./chunk-YBBOLEEC-f43d4461.js";import"./mergeRefs-2b78dc7b.js";import"./VisuallyHidden-6788c411.js";import"./chunk-RFEIBVIG-7ed02666.js";import"./chunk-7F3ZLNJ6-bf78ceb0.js";import"./chunk-IXXDDLGU-6e35b466.js";import"./chunk-GQT3YUX3-05826e1a.js";import"./index-dc85cc98.js";import"./chunk-6NL67ZRH-a7aa1da5.js";import"./proxy-1822e291.js";import"./create-factory-27ee3d52.js";import"./chunk-TDOFO53L-d21b4ec9.js";import"./chunk-736YWA4T-0c999bc3.js";import"./useDialog-1281e82d.js";import"./useLabels-bd056dc8.js";import"./Overlay-e3689e7a.js";import"./useOverlayTriggerState-20dfbcae.js";function Te({transactions:d,token:p}){const[a,o]=i.useState(null),[x,n]=i.useState(!1),{isOpen:f,onOpen:h,onOpenChange:b}=E(),u=async t=>{try{n(!0),o(null);const s=await C(route("payment.details",t),{headers:{Authorization:p}});if(s.status!==200)throw new Error("Error al obtener los datos de las transacciones: ");n(!1),o(s.data.transaction)}catch(s){console.error(s),o(null),n(!1)}},j=({status:t})=>t==="Cancelada"?e.jsx("span",{className:"font-bold text-yellow-500",children:"Cancelada"}):t==="Aceptada"?e.jsx("span",{className:"font-bold text-green-500",children:"Aprobada"}):e.jsx("span",{className:"font-bold text-red-500",children:"Rechazada"});return e.jsxs(e.Fragment,{children:[e.jsxs(R,{"aria-label":"Tabla de transacciones Epayco Meltec",children:[e.jsx(z,{children:v.map((t,s)=>e.jsx(S,{className:"text-center",children:t},s))}),e.jsx(F,{children:d.map(({referencePayco:t,names:s,lastnames:N,paymentMethod:g,bank:_,amount:w,currency:y,status:r,transactionDate:k})=>e.jsxs(M,{className:`text-center ${r==="Rechazada"?"bg-red-500/25":r==="Cancelada"?"bg-yellow-500/25":"bg-green-500/25"}`,children:[e.jsxs(l,{children:[" ",e.jsx(O,{color:r==="Rechazada"?"danger":r==="Cancelada"?"warning":"success",className:"text-white",onClick:()=>u(t),onPress:h,children:t})]}),e.jsx(l,{children:m(k)}),e.jsxs(l,{children:[s," ",N]}),e.jsxs(l,{children:[g," - ",_]}),e.jsx(l,{children:c({value:w,money:y})})]},t))})]}),e.jsx(P,{isOpen:f,onOpenChange:b,size:"3xl",children:e.jsxs(A,{children:[x&&e.jsx(D,{message:"Obteniendo datos de la Referencia, espera un momento"}),a&&e.jsxs(e.Fragment,{children:[e.jsxs(L,{className:"flex gap-1 font-normal",children:["Referencia N°: ",e.jsx("span",{className:"font-black text-blue-600/80",children:a.referencePayco})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"flex flex-row gap-5 justify-between",children:[e.jsxs("h5",{className:"font-semibold text-blue-600/80 text-right",children:["Estado: ",j({status:a.status})]}),e.jsx("h5",{className:"font-semibold text-blue-600/80 text-right",children:m(a.transactionDate)})]}),e.jsxs("div",{className:"flex flex-row justify-between gap-2 items-center",children:[e.jsxs("div",{className:"px-4 text-left flex-col flex flex-1 gap-3 ",children:[e.jsxs("h5",{className:"font-semibold text-blue-600/80",children:["Descripción del pago: ",e.jsx("p",{className:"text-black font-normal",children:a.description})]}),e.jsxs("div",{className:"flex flex-row gap-5",children:[e.jsxs("h5",{className:"font-semibold text-blue-600/80",children:["Cliente: ",e.jsxs("p",{className:"text-black font-normal",children:[a.firstName," ",a.lastName]})]}),e.jsxs("h5",{className:"font-semibold text-blue-600/80",children:["Número de Contacto: ",e.jsx("p",{className:"text-black font-normal",children:a.mobilePhone})]})]}),e.jsxs("h5",{className:"font-semibold text-blue-600/80",children:["Direccion IP de la transacción: ",e.jsx("p",{className:"text-black font-normal",children:a.ip})]}),e.jsxs("div",{className:"flex flex-row gap-5",children:[e.jsxs("h5",{className:"font-semibold text-blue-600/80",children:["Medio de pago - Banco: ",e.jsxs("p",{className:"text-black font-normal",children:[a.paymentMethod," ",a.bank]})]}),e.jsxs("h5",{className:"font-semibold text-blue-600/80",children:["Monto en COP: ",e.jsx("p",{className:"text-black font-normal",children:c({value:a.amount,money:"COP"})})]})]}),a.status==="Rechazada"&&e.jsxs("h5",{className:"font-semibold text-blue-600/80",children:["Motivo de Rechazo: ",e.jsx("p",{className:"text-black font-normal",children:a.response})]})]}),e.jsx("picture",{className:"aspect-square w-60 h-60 flex-none",children:e.jsx("img",{src:"/img/factura.webp",alt:"Factura de referencia - Designed by Freepik"})})]})]}),e.jsx(q,{})]})]})})]})}export{Te as default};
