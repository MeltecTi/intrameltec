import{r as n,j as e,b as x}from"./app-1e18f165.js";import"./notistack.esm-5ab8ec6f.js";import{t as _,a as w,b as o,c as y,d as h,e as s}from"./chunk-YRZGWF2W-66605d98.js";import"./clsx.m-1229b3e0.js";import"./chunk-UWE6H66T-10fe3d2c.js";import"./index-4be7962f.js";import"./chunk-GH5E4FQB-d59c17be.js";import"./Cell-ac88c214.js";import"./SelectionManager-72778fb6.js";import"./FocusScope-34698c61.js";import"./focusSafely-0d0e41b4.js";import"./useCollator-f8b7b7a1.js";import"./getScrollParent-84ae6cc8.js";import"./useFocusable-37bc966c.js";import"./useControlledState-0b6c3be6.js";import"./LiveAnnouncer-0a9a6b45.js";import"./useLocalizedStringFormatter-6dfb6611.js";import"./useCheckboxGroupItem-fe2e6ce0.js";import"./useFormValidation-711bb887.js";import"./useFormReset-2e1c4ba3.js";import"./index-1246260e.js";import"./index-20416e40.js";import"./useHover-fbcb60c8.js";import"./chunk-UX7UMZL5-0433f114.js";import"./mergeRefs-2b78dc7b.js";import"./VisuallyHidden-6788c411.js";function W({refreshAccessToken:u}){const[c,l]=n.useState([]),[p,i]=n.useState(!1),[j,d]=n.useState(null);n.useState("");const[b,m]=n.useState([]),N=async()=>{let t;const v=Date.now()>parseInt(3599,10);if(!t||v)try{if(await u(),t=localStorage.getItem("access_token"),!t){alert("No se pudo obtener un token vÃ¡lido.");return}}catch(a){alert("Error al renovar el token: "+a.message);return}try{const a=await x.post("https://internal.meltec.com.co/list-files",{},{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${t}`}});a.data.files?l(a.data.files):l([])}catch(a){console.error("Error al listar archivos:",a)}};n.useEffect(()=>{N()},[]);const g=async t=>{d(t),m([]),i(!0);try{const r=await x.get(`https://internal.meltec.com.co/comentarios/${t}`);console.log(r.data),m(r.data)}catch(r){console.error("Error al cargar los comentarios",r.response?r.response.data:r.message)}},f=()=>{i(!1),d(null)};return e.jsxs("div",{children:[e.jsx("div",{className:"",children:e.jsx("div",{className:"border rounded-lg p-4 shadow hover:shadow-lg transition-shadow",children:e.jsxs(_,{"aria-label":"Example static collection table",children:[e.jsxs(w,{children:[e.jsx(o,{children:"ID"}),e.jsx(o,{children:"Usuario"}),e.jsx(o,{children:"Correo"}),e.jsx(o,{children:"Area"}),e.jsx(o,{children:"Documento requerido"}),e.jsx(o,{children:"Documento Cargado"}),e.jsx(o,{children:"Fecha del documento"}),e.jsx(o,{children:"Observaciones"}),e.jsx(o,{children:"Estado de auditoria"})]}),c?e.jsx(y,{children:c.length>0?c.map((t,r)=>e.jsxs(h,{className:"text-center",children:[e.jsx(s,{children:t.id_documento}),e.jsx(s,{children:t.usuario}),e.jsx(s,{children:t.correo}),e.jsx(s,{children:t.area_usuario}),e.jsx(s,{children:t.documento}),e.jsx(s,{children:t.documento_cargado}),e.jsx(s,{children:t.fecha_cargue}),e.jsx(s,{children:e.jsx("button",{className:"bg-[#395181] text-white p-2 rounded-lg border border-separate cursor-pointer transition duration-250 ease-in-out hover:-translate-y-2 hover:scale-11 hover:bg-[#5b80ca]",onClick:()=>g(t.archivo_id),children:"Ver Observaciones"})}),e.jsx(s,{children:t.estado_auditoria})]},r)):e.jsxs(h,{children:[e.jsx(s,{className:"text-center",children:"No se encuentran docuemntos"}),e.jsx(s,{className:"text-center",children:"No se encuentran docuemntos"}),e.jsx(s,{className:"text-center",children:"No se encuentran docuemntos"}),e.jsx(s,{className:"text-center",children:"No se encuentran docuemntos"}),e.jsx(s,{className:"text-center",children:"No se encuentran docuemntos"}),e.jsx(s,{className:"text-center",children:"No se encuentran docuemntos"}),e.jsx(s,{className:"text-center",children:"No se encuentran docuemntos"}),e.jsx(s,{className:"text-center",children:"No se encuentran docuemntos"}),e.jsx(s,{className:"text-center",children:"No se encuentran docuemntos"})]})}):e.jsx("p",{children:"Cargando archivos ..."})]})})}),p&&j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg w-full sm:w-3/4 md:w-2/3 lg:w-1/2 xl:w-1/3",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Observaciones del director de auditoria"}),e.jsxs("div",{className:"mt-4",style:{maxHeight:"300px",overflowY:"scroll"},children:[e.jsx("h3",{className:"font-bold mb-2",children:"Observaciones:"}),e.jsx("ul",{className:"space-y-4",children:b.map((t,r)=>e.jsxs("li",{className:"p-4 border border-gray-300 rounded-md",children:[e.jsx("p",{children:t.comentario}),e.jsx("small",{className:"text-gray-500",children:t.fecha_comentario})]},r))})]}),e.jsx("button",{onClick:f,className:"mt-6 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition",children:"Cerrar"})]})})]})}export{W as default};
